* 2026.01.09 20:41:56

# Дополнение к ТЗ АС «pro_ai_agents»: Модерация и ручное утверждение контента

**Дата:** 2026-01-09  
**Статус:** утверждено  
**Относится к ТЗ.md:** разделы 9, 16  

---

## 1 Назначение дополнения

Настоящее дополнение:
- фиксирует **правила и процесс ручной модерации** контента;
- определяет **чек-листы решений** (Approve / Reject / Edit);
- формализует **причины отклонения** и граничные случаи.

---

## 2 Общие принципы модерации (MVP)

- **100% контента** проходит ручную модерацию.
- Решение принимается **по черновику (Draft)**.
- Автоматическая валидация (ValidateDraftJson) **не заменяет** ручное решение.
- Модератор отвечает за:
  - соответствие ТЗ и дополнениям;
  - редакционную целостность;
  - комплаенс.

---

## 3 Возможные решения модератора

### 3.1 Approve
Контент полностью соответствует требованиям и допускается к публикации без изменений.

### 3.2 Edit
Контент в целом допустим, но требует ручных правок (текст, формулировки, теги).

### 3.3 Reject
Контент не допускается к публикации; требуется указание причины.

---

## 4 Чек-лист решения Approve

Модератор выбирает **Approve**, если одновременно выполнены все условия:
- Источники:
  - `Sources[0]` присутствует и является первоисточником.
  - URL канонизирован, не является дублем.
- Тематика:
  - материал строго в границах утверждённой тематики.
- Факты:
  - утверждения соответствуют источнику;
  - риск фактчекинга приемлем.
- Стиль:
  - соблюдён тон и формат для типа контента;
  - отсутствуют клише, эмоции, маркетинговые формулировки.
- Комплаенс:
  - отсутствуют запрещённые материалы;
  - при необходимости есть корректные пометки.
- Формат:
  - структура соответствует шаблону;
  - длина в допустимых пределах.

---

## 5 Чек-лист решения Edit

Модератор выбирает **Edit**, если:
- фактическая основа корректна;
- источники допустимы;
- нарушения ограничены:
  - формулировками;
  - стилем;
  - структурой;
  - избыточной длиной;
  - неточными тегами.

Правки **не должны**:
- добавлять новые факты без источников;
- менять смысл утверждений;
- обходить правила фактчекинга и комплаенса.

---

## 6 Причины Reject (enum)

### 6.1 Duplicate
- Источник уже публиковался или находится в очереди (совпадение CanonicalUrl).

### 6.2 NoPrimarySource
- Отсутствует или некорректен первоисточник (`Sources[0]`).

### 6.3 OffTopic
- Материал выходит за утверждённые границы тематики.

### 6.4 FactRisk
- Недостаточные подтверждения;
- спорные утверждения без надёжных источников;
- смешение фактов и интерпретаций.

### 6.5 StyleViolation
- Нарушение тона, структуры или формата;
- использование клише, хайпа, эмоциональной окраски.

### 6.6 ComplianceRisk
- Риск нарушения требований законодательства;
- отсутствие обязательных пометок;
- ссылки на запрещённые материалы.

---

## 7 Граничные случаи и правила принятия решений

- При сомнении между **Edit** и **Reject**:
  - если исправление возможно без добавления новых источников → Edit;
  - если требуется новый источник или переписывание смысла → Reject.
- Материалы со статусом **Rejected**:
  - не публикуются;
  - могут быть переработаны только через создание нового Candidate.

---

## 8 Фиксация решений

- Каждое решение фиксируется в сущности `ModerationDecision`.
- Обязательные поля:
  - `decision`;
  - `decided_by`;
  - `decided_at`;
  - `reject_reason` (только для Reject).
- Комментарий (`note`) — опционален, но рекомендуется для Reject.

---